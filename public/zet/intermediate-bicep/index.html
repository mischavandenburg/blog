<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Notes: Intermediate Bicep | Mischa van den Burg</title><meta name=keywords content="Bicep,Azure,Coding,Study"><meta name=description content="Today I finished the Intermediate Bicep module. Here are my notes.
Child and Extension You can also use Bicep to refer to resources that were created outside the Bicep file itself. For example, you can refer to resources that your colleagues have created manually by using the Azure portal, or from within another Bicep template or module, even if they&rsquo;re in a different resource group or subscription. By using these features of Bicep, you can unlock the ability to create powerful templates that deploy all aspects of your Azure infrastructure."><meta name=author content="Mischa van den Burg"><link rel=canonical href=https://mischavandenburg.com/zet/intermediate-bicep/><link crossorigin=anonymous href=/assets/css/stylesheet.min.2985f2fa30372639adfab1e273fb6788b05b2b2a29c02604a3983ca3a92091e6.css integrity="sha256-KYXy+jA3Jjmt+rHic/tniLBbKyopwCYEo5g8o6kgkeY=" rel="preload stylesheet" as=style><link rel=icon href=https://mischavandenburg.com/favicon.ico><link rel=apple-touch-icon href=https://mischavandenburg.com/apple-touch-icon.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-VLS3GJYW82"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VLS3GJYW82",{anonymize_ip:!1})}</script><meta name=twitter:card content="summary"><meta name=twitter:title content="Notes: Intermediate Bicep | Mischa van den Burg"><meta name=twitter:description content="Today I finished the Intermediate Bicep module. Here are my notes.
Child and Extension You can also use Bicep to refer to resources that were created outside the Bicep file itself. For example, you can refer to resources that your colleagues have created manually by using the Azure portal, or from within another Bicep template or module, even if they&rsquo;re in a different resource group or subscription. By using these features of Bicep, you can unlock the ability to create powerful templates that deploy all aspects of your Azure infrastructure."><meta property="og:title" content="Notes: Intermediate Bicep | Mischa van den Burg"><meta property="og:description" content="Today I finished the Intermediate Bicep module. Here are my notes.
Child and Extension You can also use Bicep to refer to resources that were created outside the Bicep file itself. For example, you can refer to resources that your colleagues have created manually by using the Azure portal, or from within another Bicep template or module, even if they&rsquo;re in a different resource group or subscription. By using these features of Bicep, you can unlock the ability to create powerful templates that deploy all aspects of your Azure infrastructure."><meta property="og:type" content="article"><meta property="og:url" content="https://mischavandenburg.com/zet/intermediate-bicep/"><meta property="og:image" content="https://mischavandenburg.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="zet"><meta property="article:published_time" content="2023-03-14T00:00:00+00:00"><meta property="article:modified_time" content="2023-03-14T00:00:00+00:00"><meta property="og:site_name" content="Mischa's Blog & Public Zettelkasten"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Zettelkasten","item":"https://mischavandenburg.com/zet/"},{"@type":"ListItem","position":2,"name":"Notes: Intermediate Bicep","item":"https://mischavandenburg.com/zet/intermediate-bicep/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Notes: Intermediate Bicep | Mischa van den Burg","name":"Notes: Intermediate Bicep","description":"Today I finished the Intermediate Bicep module. Here are my notes.\nChild and Extension You can also use Bicep to refer to resources that were created outside the Bicep file itself. For example, you can refer to resources that your colleagues have created manually by using the Azure portal, or from within another Bicep template or module, even if they\u0026rsquo;re in a different resource group or subscription. By using these features of Bicep, you can unlock the ability to create powerful templates that deploy all aspects of your Azure infrastructure.","keywords":["Bicep","Azure","Coding","Study"],"wordCount":"1209","inLanguage":"en","datePublished":"2023-03-14T00:00:00Z","dateModified":"2023-03-14T00:00:00Z","author":{"@type":"Person","name":"Mischa van den Burg"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://mischavandenburg.com/zet/intermediate-bicep/"},"publisher":{"@type":"Organization","name":"Mischa van den Burg","logo":{"@type":"ImageObject","url":"https://mischavandenburg.com/favicon.ico"}}}</script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary-bg:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list-page{background:var(--theme)}.list-page:not(.dark)::-webkit-scrollbar-track{background:0 0}.list-page:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body class="type-zet kind-page layout-" id=top><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="auto",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><header class=header><nav class=nav><div class=logo><a href=https://mischavandenburg.com/ accesskey=h title="Mischa van den Burg (Alt + H)">Mischa van den Burg</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://mischavandenburg.com/aboutme/ title="Start Here">Start Here</a></li><li><a href=https://mischavandenburg.com/tags/ title=Tags>Tags</a></li><li><a href=https://mischavandenburg.com/archives/ title="Index (Zet)">Index (Zet)</a></li><li><a href=https://mischavandenburg.com/tags/article/ title=Articles>Articles</a></li><li><a href=https://mischavandenburg.com/search/ title="Search (Alt + /)" data-no-instant accesskey=/>Search</a></li></ul></nav></header><main class="main post"><article class=post-single><header class=post-header><h1 class=post-title>Notes: Intermediate Bicep</h1><div class=post-meta><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>March 14, 2023</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://mischavandenburg.com/tags/bicep/>Bicep</a><a href=https://mischavandenburg.com/tags/azure/>Azure</a><a href=https://mischavandenburg.com/tags/coding/>Coding</a><a href=https://mischavandenburg.com/tags/study/>Study</a></span></span></div></header><div class=post-content><p>Today I finished the Intermediate Bicep module. Here are my notes.</p><h1 id=child-and-extension>Child and Extension<a hidden class=anchor aria-hidden=true href=#child-and-extension>¶</a></h1><blockquote><p>You can also use Bicep to refer to resources that were created outside the Bicep file itself. For example, you can refer to resources that your colleagues have created manually by using the Azure portal, or from within another Bicep template or module, even if they&rsquo;re in a different resource group or subscription. By using these features of Bicep, you can unlock the ability to create powerful templates that deploy all aspects of your Azure infrastructure.</p></blockquote><p>Some resources are only deployed in context of their parent. For example:</p><p>Virtual network subnets Microsoft.Network/virtualNetworks/subnets
App Service configuration Microsoft.Web/sites/config
SQL databases Microsoft.Sql/servers/databases
Virtual machine extensions Microsoft.Compute/virtualMachines/extensions
Storage blob containers Microsoft.Storage/storageAccounts/blobServices/containers
Azure Cosmos DB containers</p><p>It does not make sense for a container to exist without a storage account.</p><h2 id=difference-between-child-and-extension>Difference between child and extension<a hidden class=anchor aria-hidden=true href=#difference-between-child-and-extension>¶</a></h2><p>In summary, you define extensions with the <code>scope</code> keyword, and child resources are defined by nesting them or by using the <code>parent</code> keyword.</p><p>An extension resource is a resource that modifies another resource. For example, assigning a role to a resource.</p><p>A child resource is a resource that exists only within the context of another resource, such as a subnet existing only within a vnet.</p><h2 id=nested-resource>Nested resource<a hidden class=anchor aria-hidden=true href=#nested-resource>¶</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bicep data-lang=bicep><span class=line><span class=cl><span class=kd>resource</span><span class=w> </span>vm<span class=w> </span><span class=s>&#39;Microsoft.Compute/virtualMachines@2020-06-01&#39;</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span>vmName<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>location</span><span class=p>:</span><span class=w> </span>location<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>properties</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=kd>resource</span><span class=w> </span>installCustomScriptExtension<span class=w> </span><span class=si>&#39;extensions&#39;</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;InstallCustomScript&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>location</span><span class=p>:</span><span class=w> </span>location<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>properties</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>Here the extension resource is within the vm resource. The fully qualified domain name is <code>Microsoft.Compute/virtualMachines/extensions</code>, but it is not necessary because it inherits it from the parent. Therefore we only need to specify &rsquo;extensions&rsquo; here.</p><p>No API version is specified either, this is also inherited.</p><blockquote><p>You can refer to a nested resource by using the :: operator. For example, you could create an output that will return the full resource ID of the extension:</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bicep data-lang=bicep><span class=line><span class=cl><span class=kd>output</span><span class=w> </span>childResourceId<span class=w> </span><span class=nf>string</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=py>vm</span><span class=p>::</span>installCustomScriptExtension<span class=p>.</span>id<span class=w>
</span></span></span></code></pre></div><h2 id=parent-property>Parent property<a hidden class=anchor aria-hidden=true href=#parent-property>¶</a></h2><p>This is the second way to declare a child resource.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bicep data-lang=bicep><span class=line><span class=cl><span class=kd>resource</span><span class=w> </span>vm<span class=w> </span><span class=s>&#39;Microsoft.Compute/virtualMachines@2020-06-01&#39;</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span>vmName<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>location</span><span class=p>:</span><span class=w> </span>location<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>properties</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>resource</span><span class=w> </span>installCustomScriptExtension<span class=w> </span><span class=s>&#39;Microsoft.Compute/virtualMachines/extensions@2020-06-01&#39;</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>parent</span><span class=p>:</span><span class=w> </span>vm<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;InstallCustomScript&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>location</span><span class=p>:</span><span class=w> </span>location<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>properties</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=dependson>dependsOn<a hidden class=anchor aria-hidden=true href=#dependson>¶</a></h2><p>use dependsOn to indicate a dependency.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bicep data-lang=bicep><span class=line><span class=cl><span class=py>dependsOn</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>vm<span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>]</span><span class=w>
</span></span></span></code></pre></div><h2 id=extension-resources>Extension resources<a hidden class=anchor aria-hidden=true href=#extension-resources>¶</a></h2><p>Extension resources are always attached to other Azure resources. They extend them with extra functionality. Some examples are role assignments, locks, and policy assignments.</p><p>It doesn&rsquo;t make sense to deploy a lock by itself. It always has to be deployed to another resource, because it prevents deletion or modification of a resource.</p><p>Resources are defined almost the same way as normal resources, but you add the <code>scope</code> property to tell Bicep that it is attached to another resource in the template.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bicep data-lang=bicep><span class=line><span class=cl><span class=kd>resource</span><span class=w> </span>cosmosDBAccount<span class=w> </span><span class=s>&#39;Microsoft.DocumentDB/databaseAccounts@2020-04-01&#39;</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span>cosmosDBAccountName<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>location</span><span class=p>:</span><span class=w> </span>location<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>properties</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>resource</span><span class=w> </span>lockResource<span class=w> </span><span class=s>&#39;Microsoft.Authorization/locks@2016-09-01&#39;</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>scope</span><span class=p>:</span><span class=w> </span>cosmosDBAccount<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;DontDelete&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>properties</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>level</span><span class=p>:</span><span class=w> </span><span class=si>&#39;CanNotDelete&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>notes</span><span class=p>:</span><span class=w> </span><span class=s>&#39;Prevents deletion of the toy data Cosmos DB account.&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>Extensions have slightly different resource ID&rsquo;s. They consist of the parent resource ID, the separator <code>/providers/</code>, and the extension resource ID.</p><blockquote><p>If you see a resource ID that starts with a normal resource ID and then adds /providers/ and another resource type and name, it means that you&rsquo;re looking at an extension resource ID.</p></blockquote><h3 id=existing-resources>Existing resources<a hidden class=anchor aria-hidden=true href=#existing-resources>¶</a></h3><p>Bicep files often need to refer to resources that have been already created elswewhere. They might have been created in the portal or by another Bicep file.</p><p>Here you use the <code>existing</code> keyword in Bicep. You are defining a resource that already exists, and therefore you are telling Bicep that it shouldn&rsquo;t try to deploy it. Think of it as a placeholder resource.</p><p>You can do the same for nested or child resources.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bicep data-lang=bicep><span class=line><span class=cl><span class=kd>resource</span><span class=w> </span>storageAccount<span class=w> </span><span class=s>&#39;Microsoft.Storage/storageAccounts@2019-06-01&#39;</span><span class=w> </span>existing<span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;toydesigndocs&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h3 id=existing-resources-outside-of-the-resource-group-and-subscription>Existing resources outside of the resource group and subscription<a hidden class=anchor aria-hidden=true href=#existing-resources-outside-of-the-resource-group-and-subscription>¶</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bicep data-lang=bicep><span class=line><span class=cl><span class=kd>resource</span><span class=w> </span>vnet<span class=w> </span><span class=s>&#39;Microsoft.Network/virtualNetworks@2020-11-01&#39;</span><span class=w> </span>existing<span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>scope</span><span class=p>:</span><span class=w> </span><span class=nf>resourceGroup</span><span class=p>(</span><span class=s>&#39;f0750bbe-ea75-4ae5-b24d-a92ca601da2c&#39;</span><span class=err>,</span><span class=w> </span><span class=s>&#39;networking-rg&#39;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=s>&#39;toy-design-vnet&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>You can refer to these as long as they are within your Azure AD tenant.</p><h2 id=add-child-and-extension-resources-to-an-existing-resource>Add child and extension resources to an existing resource<a hidden class=anchor aria-hidden=true href=#add-child-and-extension-resources-to-an-existing-resource>¶</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bicep data-lang=bicep><span class=line><span class=cl><span class=kd>resource</span><span class=w> </span>server<span class=w> </span><span class=s>&#39;Microsoft.Sql/servers@2020-11-01-preview&#39;</span><span class=w> </span>existing<span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span>serverName<span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>resource</span><span class=w> </span>database<span class=w> </span><span class=s>&#39;Microsoft.Sql/servers/databases@2020-11-01-preview&#39;</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>parent</span><span class=p>:</span><span class=w> </span>server<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span>databaseName<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>location</span><span class=p>:</span><span class=w> </span>location<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>sku</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;Standard&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>tier</span><span class=p>:</span><span class=w> </span><span class=si>&#39;Standard&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>Use the <code>existing</code> keyword to refer to the resource, and then you add the child by specifying the <code>parent</code> property.</p><p>Finally, to deploy an extension resource to an existing resource, use the <code>scope</code> keyword:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bicep data-lang=bicep><span class=line><span class=cl><span class=kd>resource</span><span class=w> </span>storageAccount<span class=w> </span><span class=s>&#39;Microsoft.Storage/storageAccounts@2019-06-01&#39;</span><span class=w> </span>existing<span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;toydesigndocs&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>resource</span><span class=w> </span>lockResource<span class=w> </span><span class=s>&#39;Microsoft.Authorization/locks@2016-09-01&#39;</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>scope</span><span class=p>:</span><span class=w> </span>storageAccount<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;DontDelete&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>properties</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>level</span><span class=p>:</span><span class=w> </span><span class=si>&#39;CanNotDelete&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>notes</span><span class=p>:</span><span class=w> </span><span class=s>&#39;Prevents deletion of the toy design documents storage account.&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=referring-to-an-existing-resources-properties>Referring to an existing resource&rsquo;s properties<a hidden class=anchor aria-hidden=true href=#referring-to-an-existing-resources-properties>¶</a></h2><p>Define the resource and you can refer to its properties if the prperty isn&rsquo;t secure.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bicep data-lang=bicep><span class=line><span class=cl><span class=kd>resource</span><span class=w> </span>applicationInsights<span class=w> </span><span class=s>&#39;Microsoft.Insights/components@2018-05-01-preview&#39;</span><span class=w> </span>existing<span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span>applicationInsightsName<span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>resource</span><span class=w> </span>functionApp<span class=w> </span><span class=s>&#39;Microsoft.Web/sites@2020-06-01&#39;</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span>functionAppName<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>location</span><span class=p>:</span><span class=w> </span>location<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>kind</span><span class=p>:</span><span class=w> </span><span class=si>&#39;functionapp&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>properties</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>siteConfig</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>appSettings</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;APPINSIGHTS_INSTRUMENTATIONKEY&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>value</span><span class=p>:</span><span class=w> </span>applicationInsights<span class=p>.</span>properties<span class=p>.</span>InstrumentationKey<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>When you need to access secure data, use the listKeys() function.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bicep data-lang=bicep><span class=line><span class=cl><span class=kd>resource</span><span class=w> </span>storageAccount<span class=w> </span><span class=s>&#39;Microsoft.Storage/storageAccounts@2019-06-01&#39;</span><span class=w> </span>existing<span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span>storageAccountName<span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>resource</span><span class=w> </span>functionApp<span class=w> </span><span class=s>&#39;Microsoft.Web/sites@2020-06-01&#39;</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span>functionAppName<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>location</span><span class=p>:</span><span class=w> </span>location<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>kind</span><span class=p>:</span><span class=w> </span><span class=si>&#39;functionapp&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>properties</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>siteConfig</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>appSettings</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;StorageAccountKey&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>value</span><span class=p>:</span><span class=w> </span>storageAccount<span class=p>.</span><span class=nf>listKeys</span><span class=p>().</span>keys<span class=p>[</span>0<span class=p>].</span>value<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>The VScode extension will show hints to help you understand the data this function returns.</p><p>You need to have sufficient permissions to use the listKeys function.</p><h2 id=child-and-extension-1>Child and extension<a hidden class=anchor aria-hidden=true href=#child-and-extension-1>¶</a></h2><p>In this example we are attaching an extension to a child resource.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bicep data-lang=bicep><span class=line><span class=cl><span class=kd>resource</span><span class=w> </span>storageAccount<span class=w> </span><span class=s>&#39;Microsoft.Storage/storageAccounts@2019-06-01&#39;</span><span class=w> </span>existing<span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span>storageAccountName<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=kd>resource</span><span class=w> </span>blobService<span class=w> </span><span class=si>&#39;blobServices&#39;</span><span class=w> </span>existing<span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;default&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=cm>/* Note: Here we are attaching to blobServices which itself is a child resource. So we are attaching an extension to a child resource. */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>resource</span><span class=w> </span>storageAccountBlobDiagnostics<span class=w> </span><span class=s>&#39;Microsoft.Insights/diagnosticSettings@2017-05-01-preview&#39;</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>scope</span><span class=p>:</span><span class=w> </span><span class=py>storageAccount</span><span class=p>::</span>blobService<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span>storageAccountBlobDiagnosticSettingsName<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>properties</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>workspaceId</span><span class=p>:</span><span class=w> </span>logAnalyticsWorkspace<span class=p>.</span>id<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>logs</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>category</span><span class=p>:</span><span class=w> </span><span class=si>&#39;StorageRead&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>enabled</span><span class=p>:</span><span class=w> </span>true<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>category</span><span class=p>:</span><span class=w> </span><span class=si>&#39;StorageWrite&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>enabled</span><span class=p>:</span><span class=w> </span>true<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>category</span><span class=p>:</span><span class=w> </span><span class=si>&#39;StorageDelete&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>enabled</span><span class=p>:</span><span class=w> </span>true<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h1 id=structuring-bicep-for-collaboration>Structuring Bicep for Collaboration<a hidden class=anchor aria-hidden=true href=#structuring-bicep-for-collaboration>¶</a></h1><h2 id=configuration-maps>configuration maps<a hidden class=anchor aria-hidden=true href=#configuration-maps>¶</a></h2><p>Using many different parameters can be confusing to the user of the template you&rsquo;re writing. One way of solving this is by creating a config map:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bicep data-lang=bicep><span class=line><span class=cl><span class=p>@</span><span class=nd>allowed</span><span class=p>([</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=si>&#39;Production&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=si>&#39;Test&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>])</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>param</span><span class=w> </span>environmentType<span class=w> </span><span class=nf>string</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=si>&#39;Test&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>var</span><span class=w> </span>environmentConfigurationMap<span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>Production</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>appServicePlan</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>sku</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;P2V3&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>capacity</span><span class=p>:</span><span class=w> </span>3<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>storageAccount</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>sku</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;ZRS&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>Test</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>appServicePlan</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>sku</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;S2&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>capacity</span><span class=p>:</span><span class=w> </span>1<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>storageAccount</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>sku</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=si>&#39;LRS&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>resource</span><span class=w> </span>appServicePlan<span class=w> </span><span class=s>&#39;Microsoft.Web/serverfarms@2020-06-01&#39;</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span>appServicePlanName<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>location</span><span class=p>:</span><span class=w> </span>location<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>sku</span><span class=p>:</span><span class=w> </span>environmentConfigurationMap<span class=p>[</span>environmentType<span class=p>].</span>appServicePlan<span class=p>.</span>sku<span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>Here we are taking a parameter for the environment, but create an object that contains the settings for that particular environment. Note that we are accessing it like we&rsquo;d access a dictionary in python: <code>sku: environmentConfigurationMap[environmentType].appServicePlan.sku</code></p><h2 id=naming>Naming<a hidden class=anchor aria-hidden=true href=#naming>¶</a></h2><blockquote><p>In Bicep, you ordinarily use camelCase capitalization style for the names of parameters, variables, and resource symbolic names.</p></blockquote><p>Resource names cannot be renamed after they&rsquo;re deployed in Azure.</p><h2 id=comments>Comments<a hidden class=anchor aria-hidden=true href=#comments>¶</a></h2><p>use // for single line comments, and /* */ for multi-line comments.</p><p>When adding comments to JSON files, you might have to save the file as jsonc to let the code editor know that comments are allowed.</p></div><footer class=post-footer><nav class=paginav><a class=prev href=https://mischavandenburg.com/zet/docker-kubernetes-on-mac-m2/><span class=title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></svg>&nbsp;Prev Page</span><br><span>Running Docker and Kubernetes on Mac M2</span></a>
<a class=next href=https://mischavandenburg.com/zet/articles/fundamentals-of-bicep/><span class=title>Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span><br><span>Notes: Fundamentals of Bicep</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://mischavandenburg.com/>Mischa van den Burg</a></span><span style=display:inline-block;margin-left:1em>
<a href=https://creativecommons.org/licenses/by-nc-nd/4.0/>CC BY-NC-ND</a></span>
<span style=display:inline-block;margin-left:1em></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n=""=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/js/medium-zoom.min.js data-no-instant></script>
<script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>(function(){const a=""=="1";if(!a)return;if(!document.querySelector(".toc")){console.log("no toc found, ignore toc scroll");return}const r=window.scrollListeners,t=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id]"),n="active";let e=t[0];o(e).classList.add(n);const c=()=>{const s=[];for(const e of t)if(l(e)<5)s.push(e);else break;s.length>0?newActiveHeading=s[s.length-1]:newActiveHeading=t[0],e!=newActiveHeading&&(o(e).classList.remove(n),e=newActiveHeading,o(e).classList.add(n))};let s=null;const i=()=>{s!==null&&clearTimeout(s),s=setTimeout(c,50)};window.addEventListener("scroll",i,!1),r.push(i);function o(e){const t=encodeURI(e.getAttribute("id")).toLowerCase();return document.querySelector(`.toc ul li a[href="#${t}"]`)}function l(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect();return t.top}})()</script></body></html>