<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>AKS | Mischa van den Burg</title>
<meta name=keywords content><meta name=description content="Writing about the things I learn in my Cloud Native work: Kubernetes, Azure, Vim, Linux, Coding, Productivity"><meta name=author content="Mischa van den Burg"><link rel=canonical href=https://mischavandenburg.com/tags/aks/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://mischavandenburg.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://mischavandenburg.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://mischavandenburg.com/favicon-32x32.png><link rel=apple-touch-icon href=https://mischavandenburg.com/apple-touch-icon.png><link rel=mask-icon href=https://mischavandenburg.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://mischavandenburg.com/tags/aks/index.xml><link rel=alternate hreflang=en href=https://mischavandenburg.com/tags/aks/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-VLS3GJYW82"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VLS3GJYW82")}</script><meta property="og:url" content="https://mischavandenburg.com/tags/aks/"><meta property="og:site_name" content="Mischa van den Burg"><meta property="og:title" content="AKS"><meta property="og:description" content="Writing about the things I learn in my Cloud Native work: Kubernetes, Azure, Vim, Linux, Coding, Productivity"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://mischavandenburg.com/cloud-blue-logo.jpeg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://mischavandenburg.com/cloud-blue-logo.jpeg"><meta name=twitter:title content="AKS"><meta name=twitter:description content="Writing about the things I learn in my Cloud Native work: Kubernetes, Azure, Vim, Linux, Coding, Productivity"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://mischavandenburg.com/ accesskey=h title="Mischa van den Burg (Alt + H)">Mischa van den Burg</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://mischavandenburg.com/aboutme/ title=About><span>About</span></a></li><li><a href=https://mischavandenburg.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://mischavandenburg.com/archives/ title=Index><span>Index</span></a></li><li><a href=https://mischavandenburg.com/search/ title="🔍 (Alt + /)" accesskey=/><span>🔍</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>AKS</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Comparing akv2k8s with Azure Key Vault Provider for Secret Store CSI Driver</h2></header><div class=entry-content><p>In a recent analysis, I explored two notable solutions for synchronizing secrets from Azure Key Vaults to AKS (Azure Kubernetes Service) clusters: akv2k8s and the Azure Key Vault Provider for the Secret Store CSI Driver. Here, I present my findings and recommendations based on the functionality, maintenance requirements, and integration capabilities of these tools.
Akv2k8s, maintained by Sparebanken, is an open-source tool designed for the synchronization of secrets. Being dependent on an external tool for Kubernetes secrets synchronization is an undesirable situation and poses several challenges. Notably, the latest version of akv2k8s has been problematic, especially concerning the deployment of Postgres databases on our AKS clusters using the EDB operator. Akv2k8s alters the SecurityContext of pods in a way that causes them to fail.
...</p></div><footer class=entry-footer><span title='2024-03-11 00:00:00 +0000 UTC'>March 11, 2024</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Comparing akv2k8s with Azure Key Vault Provider for Secret Store CSI Driver" href=https://mischavandenburg.com/zet/articles/akv2k8s-azure-key-vault-csi-analysis/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>PersistentVolumeClaims Lifecycle in Kubernetes</h2></header><div class=entry-content><p>I always thought that Persistent Volume Claims where deleted when you delete the pod which they are associated with. I was wrong. The lifecycle of PVCs is independent of Pods, and their behavior is largely governed by the Reclaim Policy set on the PVs. Here’s what you need to know:
PVCs: These are requests for storage, akin to how Pods request resources like CPU and memory. They exist independently and can be bound to Pods when needed. PVs: Provisioned by administrators or dynamically through Storage Classes, PVs provide the actual storage resources. Their lifecycle is not tied to any specific Pod. Understanding Reclaim Policies The Reclaim Policy on a PV dictates its fate after a PVC is released. There are three policies to be aware of:
...</p></div><footer class=entry-footer><span title='2024-01-18 00:00:00 +0000 UTC'>January 18, 2024</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to PersistentVolumeClaims Lifecycle in Kubernetes" href=https://mischavandenburg.com/zet/kubernetes-storage-pvc-pv/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Homelab Secret Management With GitOps and Azure Key Vault</h2></header><div class=entry-content><p>In this blog post, I want to share with you how I set up secrets management for my home lab. I use my home lab to explore new technologies, but I also try to keep it in line with the practices I would use when setting up environments for clients. I focus on Microsoft Azure and the ecosystem they provide for cloud native applications. Secrets management is an important aspect of any cloud-native application, as it allows you to securely store and access sensitive information such as passwords, tokens and certificates.
...</p></div><footer class=entry-footer><span title='2023-12-29 00:00:00 +0000 UTC'>December 29, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Homelab Secret Management With GitOps and Azure Key Vault" href=https://mischavandenburg.com/zet/handling-secrets-kubernetes/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Implementing Pod Disruption Budgets</h2></header><div class=entry-content><p>When I was doing the first round of AKS cluster upgrades at my current client, I noticed we were running a lot of pods with only 1 replica. I always try to lift my clients to the next level by leveraging Cloud Native technologies as much as possible. I’m therefore starting a project to always run applications with multiple replicas.
However, running multiple replicas is not the only necessary improvement here. Even though a pod is running with multiple replicas, that does not mean that Kubernetes will always keep them alive. When you do an AKS cluster upgrade, nodes are drained one by one and the pods are moved to a node with the higher k8s version. Technically, when draining a node, Kubernetes could kill both of the pods at the same time if they are running on the same node.
...</p></div><footer class=entry-footer><span title='2023-11-27 00:00:00 +0000 UTC'>November 27, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Implementing Pod Disruption Budgets" href=https://mischavandenburg.com/zet/implementing-poddisruptionbudgets/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>KEDA went GA for AKS!</h2></header><div class=entry-content><p>Great news! KEDA finally went GA for AKS.
https://learn.microsoft.com/en-us/azure/aks/keda-about
Links: 202311081711</p></div><footer class=entry-footer><span title='2023-11-09 00:00:00 +0000 UTC'>November 9, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to KEDA went GA for AKS!" href=https://mischavandenburg.com/zet/keda-ga/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Backing up AKS Clusters with Azure Backup is now in preview</h2></header><div class=entry-content><p>You can back up your AKS clusters using Azure Backup in preview! Preferably you have your clusters stateless and you can redeploy everything from code when sh*t hits the fan. However, I can think of a few enterprise use cases that will be relevant for this new feature.
https://learn.microsoft.com/en-us/azure/backup/azure-kubernetes-service-cluster-backup
Links: 202310130610
[[AKS]]
[[Kubernetes]]
[[Azure]]</p></div><footer class=entry-footer><span title='2023-10-13 00:00:00 +0000 UTC'>October 13, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Backing up AKS Clusters with Azure Backup is now in preview" href=https://mischavandenburg.com/zet/aks-azure-backup-preview/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Some Interesting Features went GA on Azure</h2></header><div class=entry-content><p>Yesterday a few interesting AKS related features became Generally Available on Azure.
KEDA add-on makes it easier to scale your applications on AKS cluster.
https://azure.microsoft.com/en-us/updates/generally-available-keda-addon-for-aks/
You can have a flexible and customized strategy for node-level OS security updates.
https://azure.microsoft.com/en-us/updates/ga-node-os-patching-nodeimage-feature-in-aks/
Use Vertical Pod Autoscaling add-on for AKS to improve cost-efficiency, and cluster utilization for your workloads
https://azure.microsoft.com/en-us/updates/ga-vertical-pod-autoscaling-addon-for-aks/
Preview Public preview: AKS support for Kubernetes version 1.28
https://azure.microsoft.com/en-us/updates/public-preview-aks-support-for-kubernetes-version-128/
Links: 202309281009
[[Azure]]
[[Kubernetes]]
...</p></div><footer class=entry-footer><span title='2023-09-28 00:00:00 +0000 UTC'>September 28, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Some Interesting Features went GA on Azure" href=https://mischavandenburg.com/zet/azure-updates-sept-23/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Pod Disruption Budgets Can Mess With Your AKS Updates</h2></header><div class=entry-content><p>Past week we’ve been struggling a bit with poorly configured pod disruption budgets. When you do an AKS upgrade, a new node is created and one of the old nodes is drained.
If a deployment has a pod disruption budget which is incorrectly configured, it might show up as ALLOWED DISRUPTIONS: 0. When this happens, the node cannot be drained and you will get an error message in your events.
...</p></div><footer class=entry-footer><span title='2023-09-27 00:00:00 +0000 UTC'>September 27, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Pod Disruption Budgets Can Mess With Your AKS Updates" href=https://mischavandenburg.com/zet/pod-disruption-budget-aks/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Video: Deploying AKS Cluster With Azure CNI Using Bicep</h2></header><div class=entry-content><p>In this video, I will show you how to use Bicep to deploy a Kubernetes cluster with custom network settings using the Azure CNI.
Azure CNI allows pods to be assigned IP addresses from Azure VNets which allows them to communicate with Azure resources directly through peered networks.
...</p></div><footer class=entry-footer><span title='2023-07-09 00:00:00 +0000 UTC'>July 9, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Video: Deploying AKS Cluster With Azure CNI Using Bicep" href=https://mischavandenburg.com/zet/video-deploy-aks-with-azure-cni/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Video: Finishing Pipeline Setup & Working on KeyVault Template - Azure Kubernetes Lab Series</h2></header><div class=entry-content><p>Finish deploying keyvault using pipeline Get the random name generation to work Lessons Learned Subscriptions need to be registered with resource providers, apparently https://learn.microsoft.com/en-us/azure/azure-resource-manager/troubleshooting/error-register-resource-provider?tabs=azure-cli
acccesPolicies are mandatory on KeyVaults, but not when RBAC is enabled Assign contributor role to Azure DevOps service connection to be able to create resource groups from pipeline Achieved Setting up connection between pipeline and Azure subscription Assign correct rights to the service connection so it is allowed to deploy new resource groups (and other resources) Learned about provider registrations Made progress on creating unique names for resources Successfully deployed new resource group and key vault from the pipeline Next time: Look into random string creation with utcNow
...</p></div><footer class=entry-footer><span title='2023-06-30 00:00:00 +0000 UTC'>June 30, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Video: Finishing Pipeline Setup  & Working on KeyVault Template - Azure Kubernetes Lab Series" href=https://mischavandenburg.com/zet/video-finish-pipeline-setup-aks-series/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://mischavandenburg.com/tags/aks/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://mischavandenburg.com/>Mischa van den Burg</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>