<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Bicep | Mischa van den Burg</title>
<meta name=keywords content><meta name=description content="Writing about the things I learn in my Cloud Native work: Kubernetes, Azure, Vim, Linux, Coding, Productivity"><meta name=author content="Mischa van den Burg"><link rel=canonical href=https://mischavandenburg.com/tags/bicep/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://mischavandenburg.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://mischavandenburg.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://mischavandenburg.com/favicon-32x32.png><link rel=apple-touch-icon href=https://mischavandenburg.com/apple-touch-icon.png><link rel=mask-icon href=https://mischavandenburg.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://mischavandenburg.com/tags/bicep/index.xml><link rel=alternate hreflang=en href=https://mischavandenburg.com/tags/bicep/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-VLS3GJYW82"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VLS3GJYW82")}</script><meta property="og:url" content="https://mischavandenburg.com/tags/bicep/"><meta property="og:site_name" content="Mischa van den Burg"><meta property="og:title" content="Bicep"><meta property="og:description" content="Writing about the things I learn in my Cloud Native work: Kubernetes, Azure, Vim, Linux, Coding, Productivity"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://mischavandenburg.com/cloud-blue-logo.jpeg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://mischavandenburg.com/cloud-blue-logo.jpeg"><meta name=twitter:title content="Bicep"><meta name=twitter:description content="Writing about the things I learn in my Cloud Native work: Kubernetes, Azure, Vim, Linux, Coding, Productivity"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://mischavandenburg.com/ accesskey=h title="Mischa van den Burg (Alt + H)">Mischa van den Burg</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://mischavandenburg.com/aboutme/ title=About><span>About</span></a></li><li><a href=https://mischavandenburg.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://mischavandenburg.com/archives/ title=Index><span>Index</span></a></li><li><a href=https://mischavandenburg.com/search/ title="🔍 (Alt + /)" accesskey=/><span>🔍</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Bicep</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Test Driven Development for Bicep is In The Works!</h2></header><div class=entry-content><p>During the Bicep Community Call of July 2023 I was introduced to the new experimental testing framework that the Bicep team is working on. After learning the fundamentals of the Go programming language I saw the value of test driven software development, and it will be an advantageous improvement if we can start applying this methodology to Infrastructure as Code as well.
Test driven software development is a software development practice that involves writing unit tests before writing the actual code, and then refactoring the code to pass the tests. Some of the advantages of test driven software development are:
...</p></div><footer class=entry-footer><span title='2023-08-03 00:00:00 +0000 UTC'>August 3, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Test Driven Development for Bicep is In The Works!" href=https://mischavandenburg.com/zet/bicep-testing-assertions/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Video: Deploying AKS Cluster With Azure CNI Using Bicep</h2></header><div class=entry-content><p>In this video, I will show you how to use Bicep to deploy a Kubernetes cluster with custom network settings using the Azure CNI.
Azure CNI allows pods to be assigned IP addresses from Azure VNets which allows them to communicate with Azure resources directly through peered networks.
...</p></div><footer class=entry-footer><span title='2023-07-09 00:00:00 +0000 UTC'>July 9, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Video: Deploying AKS Cluster With Azure CNI Using Bicep" href=https://mischavandenburg.com/zet/video-deploy-aks-with-azure-cni/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How To Generate Random Strings In Bicep</h2></header><div class=entry-content><p>In this video I explain how to generate random strings in Bicep and demonstrate a couple of deployments.
I use the uniqueString function combined with the utcNow function. But the caveat is that you can only use it as a default value for a parameter, as follows:
...</p></div><footer class=entry-footer><span title='2023-07-02 00:00:00 +0000 UTC'>July 2, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to How To Generate Random Strings In Bicep" href=https://mischavandenburg.com/zet/bicep-random-strings/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Video: Finishing Pipeline Setup & Working on KeyVault Template - Azure Kubernetes Lab Series</h2></header><div class=entry-content><p>Finish deploying keyvault using pipeline Get the random name generation to work Lessons Learned Subscriptions need to be registered with resource providers, apparently https://learn.microsoft.com/en-us/azure/azure-resource-manager/troubleshooting/error-register-resource-provider?tabs=azure-cli
acccesPolicies are mandatory on KeyVaults, but not when RBAC is enabled Assign contributor role to Azure DevOps service connection to be able to create resource groups from pipeline Achieved Setting up connection between pipeline and Azure subscription Assign correct rights to the service connection so it is allowed to deploy new resource groups (and other resources) Learned about provider registrations Made progress on creating unique names for resources Successfully deployed new resource group and key vault from the pipeline Next time: Look into random string creation with utcNow
...</p></div><footer class=entry-footer><span title='2023-06-30 00:00:00 +0000 UTC'>June 30, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Video: Finishing Pipeline Setup  & Working on KeyVault Template - Azure Kubernetes Lab Series" href=https://mischavandenburg.com/zet/video-finish-pipeline-setup-aks-series/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Video: Setting Up A Simple Azure Pipeline To Deploy A Keyvault</h2></header><div class=entry-content><p>Write KeyVault template Write pipeline code set up Azure DevOps pipeline Lessons Learned Always make sure to use az deployment group instead of az group deployment Because it has older Bicep version and will be deprecated Make sure to be in correct Directory to be able to sync subscriptions for service connection Links: 202306302206
...</p></div><footer class=entry-footer><span title='2023-06-30 00:00:00 +0000 UTC'>June 30, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Video: Setting Up A Simple Azure Pipeline To Deploy A Keyvault" href=https://mischavandenburg.com/zet/video-aks-lab-pipeline-first-setup/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Video: Deploying an AKS Cluster with Bicep, GitHub Copilot and Neovim</h2></header><div class=entry-content><p>Inspired by a GitHub Copilot demonstration I witnessed at Microsoft, I wanted to see how quickly I could deploy an AKS cluster from Neovim with Bicep using Copilot. I wasn’t disappointed!
Links: 202306271706
https://www.youtube.com/watch?v=l0B65FUfNBU
[[AKS]] [[Kubernetes]] [[Neovim]] [[bicep]] [[coding]]</p></div><footer class=entry-footer><span title='2023-06-27 00:00:00 +0000 UTC'>June 27, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Video: Deploying an AKS Cluster with Bicep, GitHub Copilot and Neovim" href=https://mischavandenburg.com/zet/video-deploying-aks-cluster-bicep-github-copilot/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Video: Introducing New Bicep Parameter Files - .bicepparam - No more JSON!</h2></header><div class=entry-content><p>The new parameter files use bicep style formatting instead of JSON, and they will make the lives of Cloud Engineers a lot easier. They have the following advantages:
More readable and editor friendly Cleaner and less lines of code VSCode integration Quickly convert from JSON or template file using VSCode In this video I introduce these new files. I go over the new formatting, and I also introduce the new features in VSCode for the .bicepparam files.
...</p></div><footer class=entry-footer><span title='2023-06-27 00:00:00 +0000 UTC'>June 27, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Video: Introducing New Bicep Parameter Files - .bicepparam - No more JSON!" href=https://mischavandenburg.com/zet/video-bicep-bicepparam/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How To Get The Id Of An Existing Subnet In Bicep</h2></header><div class=entry-content><p>Did a refactor of some of our Bicep template code for our AKS clusters today.
Before, we were using a rather complicated line of code using string interpolation.
var vnetSubnetId = '${resourceId(vnetResourceGroupName, 'Microsoft.Network/virtualNetworks', vnetName)}/subnets/${vnetSubnetName}' This was hard to read and the Bicep linter gave the following warning in my editor and during deployment:
WARNING: D:\a\1\a\drop\Generic-templates\containers\azure-kubernetes-service\v4.0\templates\aks.bicep(117,7) : Warning use-resource-id-functions: If property “vnetSubnetID” represents a resource ID, it must use a symbolic resource reference, be a parameter or start with one of these functions: extensionResourceId, guid, if, reference, resourceId, subscription, subscriptionResourceId, tenantResourceId. Found nonconforming expression at vnetSubnetID -> vnetSubnetId [https://aka.ms/bicep/linter/use-resource-id-functions]
...</p></div><footer class=entry-footer><span title='2023-06-23 00:00:00 +0000 UTC'>June 23, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to How To Get The Id Of An Existing Subnet In Bicep" href=https://mischavandenburg.com/zet/bicep-getting-subnet-id/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>The Ups And Downs Of A Devops Engineer</h2></header><div class=entry-content><p>Next winter I’ll be entering my third year as a DevOps Engineer. When you first break into this field there is an overwhelming amount of things to learn. Frankly, this will always be the case. But I’m reaching a point where I have gained experience with most of the main areas and tooling, and I can start seeing the relations between them and how they compare to one another.
Just like any other job or activity, there are things that you like and that suit you well, and there are things that you don’t like. And now the first phases of overwhelm are confidently behind me, I’m starting to learn the things I prefer doing over others.
...</p></div><footer class=entry-footer><span title='2023-05-04 00:00:00 +0000 UTC'>May 4, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to The Ups And Downs Of A Devops Engineer" href=https://mischavandenburg.com/zet/ups-and-downs-of-devops-engineer/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Notes: Advanced Bicep</h2></header><div class=entry-content><p>Deploying to subscriptions and management groups To tell Bicep which scope to deploy to, use the targetScope keyword, for example, managementGroup.
You’re not specifying which management group exactly, this is done during deployment of the template file.
targetScope can be set to resourceGroup, subscription, managementGroup or tenant.
If it is not set, Bicep assumes resourceGroup.
create a resource group targetScope = 'subscription' resource resourceGroup 'Microsoft.Resources/resourceGroups@2021-01-01' = { name: 'example-resource-group' location: 'westus' } To deploy you use az deployment group create for resource groups, but you use az deployment sub create for subscriptions, mg for management group and tenant for tenant.
...</p></div><footer class=entry-footer><span title='2023-03-18 00:00:00 +0000 UTC'>March 18, 2023</span>&nbsp;·&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Notes: Advanced Bicep" href=https://mischavandenburg.com/zet/advanced-bicep/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://mischavandenburg.com/tags/bicep/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://mischavandenburg.com/>Mischa van den Burg</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>