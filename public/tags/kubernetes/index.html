<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Kubernetes | Mischa van den Burg</title>
<meta name=keywords content><meta name=description content="Writing about the things I learn in my Cloud Native work: Kubernetes, Azure, Vim, Linux, Coding, Productivity"><meta name=author content="Mischa van den Burg"><link rel=canonical href=https://mischavandenburg.com/tags/kubernetes/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://mischavandenburg.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://mischavandenburg.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://mischavandenburg.com/favicon-32x32.png><link rel=apple-touch-icon href=https://mischavandenburg.com/apple-touch-icon.png><link rel=mask-icon href=https://mischavandenburg.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://mischavandenburg.com/tags/kubernetes/index.xml><link rel=alternate hreflang=en href=https://mischavandenburg.com/tags/kubernetes/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-VLS3GJYW82"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VLS3GJYW82")}</script><meta property="og:url" content="https://mischavandenburg.com/tags/kubernetes/"><meta property="og:site_name" content="Mischa van den Burg"><meta property="og:title" content="Kubernetes"><meta property="og:description" content="Writing about the things I learn in my Cloud Native work: Kubernetes, Azure, Vim, Linux, Coding, Productivity"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://mischavandenburg.com/cloud-blue-logo.jpeg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://mischavandenburg.com/cloud-blue-logo.jpeg"><meta name=twitter:title content="Kubernetes"><meta name=twitter:description content="Writing about the things I learn in my Cloud Native work: Kubernetes, Azure, Vim, Linux, Coding, Productivity"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://mischavandenburg.com/ accesskey=h title="Mischa van den Burg (Alt + H)">Mischa van den Burg</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://mischavandenburg.com/aboutme/ title=About><span>About</span></a></li><li><a href=https://mischavandenburg.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://mischavandenburg.com/archives/ title=Index><span>Index</span></a></li><li><a href=https://mischavandenburg.com/search/ title="üîç (Alt + /)" accesskey=/><span>üîç</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Kubernetes</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Talos Homelab Upgrade Guide October</h2></header><div class=entry-content><p>[!IMPORTANT] Remember to create a custom image including iscsi-tools when using the Synology CSI driver
Set up CLI environment and set databases to maintenance mode export TALOS_CP="192.168.100.107" export TALOS_W1="192.168.100.245" export TALOS_W2="192.168.100.60" export TALOS_W3="192.168.100.228" # Set databases to maintenance mode k cnp maintenance set --all-namespaces [!WARNING] Use the --preserve flag on single-node control plane clusters. Only needed for the control plane node.
Upgrade path from 1.7.5 to 1.7.7 from 1.7.7 to 1.8.2 Upgrade 1 export TALOS_IMAGE='factory.talos.dev/installer/c9078f9419961640c712a8bf2bb9174933dfcf1da383fd8ea2b7dc21493f8bac:v1.7.7' talosctl upgrade --preserve --nodes $TALOS_CP -e $TALOS_CP --image $TALOS_IMAGE talosctl upgrade --wait --debug --nodes $TALOS_W1 -e $TALOS_CP --image $TALOS_IMAGE talosctl upgrade --wait --debug --nodes $TALOS_W2 -e $TALOS_CP --image $TALOS_IMAGE talosctl upgrade --wait --debug --nodes $TALOS_W3 -e $TALOS_CP --image $TALOS_IMAGE Upgrade 2 export TALOS_IMAGE='factory.talos.dev/installer/c9078f9419961640c712a8bf2bb9174933dfcf1da383fd8ea2b7dc21493f8bac:v1.8.2' talosctl upgrade --preserve --nodes $TALOS_CP -e $TALOS_CP --image $TALOS_IMAGE talosctl upgrade --nodes $TALOS_W1 -e $TALOS_CP --image $TALOS_IMAGE talosctl upgrade --nodes $TALOS_W2 -e $TALOS_CP --image $TALOS_IMAGE talosctl upgrade --nodes $TALOS_W3 -e $TALOS_CP --image $TALOS_IMAGE Kubernetes Upgrade [!WARNING] Make sure to upgrade the Talos CLI before proceeding. ‚ÄúIt is advisable to use the same version of talosctl as the version of the boot media used.‚Äù - Talos Docs
...</p></div><footer class=entry-footer><span title='2024-11-14 00:00:00 +0000 UTC'>November 14, 2024</span>&nbsp;¬∑&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Talos Homelab Upgrade Guide October" href=https://mischavandenburg.com/zet/talos-homelab-upgrade-guide-october/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Talos Linux Upgrade Guide July</h2></header><div class=entry-content><p>I upgraded my homelab cluster using Talos Linux today.
I made a mistake and forgot to use the custom-built image using iscsi-tools.
Learning the hard way.
Here are my notes:
Talos upgrade [!IMPORTANT] Remember to create a custom image including iscsi-tools
Set up CLI environment and set databases to maintenance mode export TALOS_CP="192.168.100.107" export TALOS_W1="192.168.100.245" export TALOS_W2="192.168.100.60" k cnp maintenance set --all-namespaces [!WARNING] Use the --preserve flag on single-node control plane clusters. Only needed for the control plane node.
...</p></div><footer class=entry-footer><span title='2024-07-31 00:00:00 +0000 UTC'>July 31, 2024</span>&nbsp;¬∑&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Talos Linux Upgrade Guide July" href=https://mischavandenburg.com/zet/talos-linux-upgrade-guide-july/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Got my CKS</h2></header><div class=entry-content><p>Just realized I never posted on the blog that I achieved the CKS a month ago.
I even created a study guide for it:
Links: 202406152006</p></div><footer class=entry-footer><span title='2024-06-15 00:00:00 +0000 UTC'>June 15, 2024</span>&nbsp;¬∑&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Got my CKS" href=https://mischavandenburg.com/zet/got-my-cks/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Alleviating Confusion About The To Field In Network Policies</h2></header><div class=entry-content><p>When solving a killercoda challenge I ran into some confusion. Even though my solution worked, there was a difference which I wanted to get clear on.
I wrote this:
apiVersion: networking.k8s.io/v1 kind: NetworkPolicy metadata: name: np namespace: space1 spec: podSelector: {} policyTypes: - Egress egress: - to: - namespaceSelector: matchLabels: kubernetes.io/metadata.name: space2 - to: ports: - protocol: TCP port: 53 - protocol: UDP port: 53 But the provided course solution was this:
...</p></div><footer class=entry-footer><span title='2024-03-25 00:00:00 +0000 UTC'>March 25, 2024</span>&nbsp;¬∑&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Alleviating Confusion About The To Field In Network Policies" href=https://mischavandenburg.com/zet/alleviating-confusion-about-the-to-field-in-network-policies/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>I'm better at Network Policies than I thought</h2></header><div class=entry-content><p>There are two things which I‚Äôm dreading most for the CKS exam: writing Network Policies and configuring RBAC under heavy time pressure.
I‚Äôve heard from colleagues that the exam has many questions of this nature, so it will be a good way of scoring points. However, regardless of the exam, the fact that I‚Äôm dreading these topics also shows that I‚Äôm not familiar enough with them and therefore this is a point where I should improve. It‚Äôs not only about the exam, but also my growth of expertise as a Kubernetes Engineer.
...</p></div><footer class=entry-footer><span title='2024-03-25 00:00:00 +0000 UTC'>March 25, 2024</span>&nbsp;¬∑&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to I'm better at Network Policies than I thought" href=https://mischavandenburg.com/zet/im-better-at-network-policies-than-i-thought/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Starting my CKS studies</h2></header><div class=entry-content><p>It seems like I will have a couple of hours a day which I can allot to study in the coming month. This will be the perfect moment to start working on a goal I‚Äôve had for a long time: getting my Certified Kubernetes Security Specialist certification.
t‚Äôs not going to be easy. I‚Äôm quite intimidated by all of the new things I‚Äôll have to learn. But that‚Äôs a good sign. It‚Äôs the way it works. Everybody would be doing this if it was easy, and I can only grow by doing hard things that seem intimidating at first.
...</p></div><footer class=entry-footer><span title='2024-03-24 00:00:00 +0000 UTC'>March 24, 2024</span>&nbsp;¬∑&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Starting my CKS studies" href=https://mischavandenburg.com/zet/starting-cks-studies/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Comparing akv2k8s with Azure Key Vault Provider for Secret Store CSI Driver</h2></header><div class=entry-content><p>In a recent analysis, I explored two notable solutions for synchronizing secrets from Azure Key Vaults to AKS (Azure Kubernetes Service) clusters: akv2k8s and the Azure Key Vault Provider for the Secret Store CSI Driver. Here, I present my findings and recommendations based on the functionality, maintenance requirements, and integration capabilities of these tools.
Akv2k8s, maintained by Sparebanken, is an open-source tool designed for the synchronization of secrets. Being dependent on an external tool for Kubernetes secrets synchronization is an undesirable situation and poses several challenges. Notably, the latest version of akv2k8s has been problematic, especially concerning the deployment of Postgres databases on our AKS clusters using the EDB operator. Akv2k8s alters the SecurityContext of pods in a way that causes them to fail.
...</p></div><footer class=entry-footer><span title='2024-03-11 00:00:00 +0000 UTC'>March 11, 2024</span>&nbsp;¬∑&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Comparing akv2k8s with Azure Key Vault Provider for Secret Store CSI Driver" href=https://mischavandenburg.com/zet/articles/akv2k8s-azure-key-vault-csi-analysis/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Kubernetes Gateway API & Azure Application Gateway for Containers</h2></header><div class=entry-content><p>This document is the result of my research into the Gateway API. It aims to briefly describe the Gateway API for Kubernetes, a typical implementation of ingress traffic using NGINX in AKS and how this setup could benefit from implementing the Gateway API.
Introduction Gateway API is an official Kubernetes project focused on L4 and L7 routing in Kubernetes. This project represents the next generation of Kubernetes Ingress, Load Balancing, and Service Mesh APIs. From the outset, it has been designed to be generic, expressive, and role-oriented.
...</p></div><footer class=entry-footer><span title='2024-03-10 00:00:00 +0000 UTC'>March 10, 2024</span>&nbsp;¬∑&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Kubernetes Gateway API & Azure Application Gateway for Containers" href=https://mischavandenburg.com/zet/articles/gateway-api-application-gateway-for-containers/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>PersistentVolumeClaims Lifecycle in Kubernetes</h2></header><div class=entry-content><p>I always thought that Persistent Volume Claims where deleted when you delete the pod which they are associated with. I was wrong. The lifecycle of PVCs is independent of Pods, and their behavior is largely governed by the Reclaim Policy set on the PVs. Here‚Äôs what you need to know:
PVCs: These are requests for storage, akin to how Pods request resources like CPU and memory. They exist independently and can be bound to Pods when needed. PVs: Provisioned by administrators or dynamically through Storage Classes, PVs provide the actual storage resources. Their lifecycle is not tied to any specific Pod. Understanding Reclaim Policies The Reclaim Policy on a PV dictates its fate after a PVC is released. There are three policies to be aware of:
...</p></div><footer class=entry-footer><span title='2024-01-18 00:00:00 +0000 UTC'>January 18, 2024</span>&nbsp;¬∑&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to PersistentVolumeClaims Lifecycle in Kubernetes" href=https://mischavandenburg.com/zet/kubernetes-storage-pvc-pv/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Video: Learning Flux and Installing To Homelab</h2></header><div class=entry-content><p>In this video I set up Flux running in a local cluster on my MacBook by following the getting started guide. Then I learn about how to structure the repo according to Flux methodology. I implement this structure in my homelab repo and deploy flux to my homelab cluster. Then I manage to configure Grafana and the Weave UI to be accessbible via ingress using a custom fake domain.
...</p></div><footer class=entry-footer><span title='2024-01-17 00:00:00 +0000 UTC'>January 17, 2024</span>&nbsp;¬∑&nbsp;Mischa van den Burg</footer><a class=entry-link aria-label="post link to Video: Learning Flux and Installing To Homelab" href=https://mischavandenburg.com/zet/video-homelab-learning-flux/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://mischavandenburg.com/tags/kubernetes/page/2/>Next&nbsp;&nbsp;¬ª</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://mischavandenburg.com/>Mischa van den Burg</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>